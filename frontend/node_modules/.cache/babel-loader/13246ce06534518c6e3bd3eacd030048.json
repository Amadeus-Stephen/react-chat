{"ast":null,"code":"import _classCallCheck from\"/home/amadeus/react-chat/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/amadeus/react-chat/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/amadeus/react-chat/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/amadeus/react-chat/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/amadeus/react-chat/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import axios from\"axios\";import DirectLink from\"./links/directLink\";import ChatroomLink from\"./links/chatroomLink\";import CreateChatDialog from\"./dialog/createChatDialog\";var LeftNavbar=/*#__PURE__*/function(_Component){_inherits(LeftNavbar,_Component);var _super=_createSuper(LeftNavbar);function LeftNavbar(props){var _this;_classCallCheck(this,LeftNavbar);_this=_super.call(this,props);_this._isMounted=false;_this.state={chatrooms:[],chatroom:null,directData:[],directto:null,isDialog:false};_this.source=axios.CancelToken.source();_this.updateLocalState=_this.updateLocalState.bind(_assertThisInitialized(_this));_this.createChat=_this.createChat.bind(_assertThisInitialized(_this));_this.getChatrooms=_this.getChatrooms.bind(_assertThisInitialized(_this));_this.getDirect=_this.getDirect.bind(_assertThisInitialized(_this));_this.clickChatLink=_this.clickChatLink.bind(_assertThisInitialized(_this));return _this;}_createClass(LeftNavbar,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this._isMounted=true;this.props.socket.on(\"create_direct\",function(){_this2.getDirect();});this.props.socket.on(\"get_chats\",function(data){_this2.setState({chatrooms:data});});this.props.socket.on(\"get_direct\",function(data){_this2.setState({directData:data});});this.getChatrooms();this.getDirect();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._isMounted=false;this.source.cancel();}},{key:\"updateLocalState\",value:function updateLocalState(stateObject){this.setState(stateObject);}},{key:\"createChat\",value:function createChat(name){this.props.createChat(name);}},{key:\"getChatrooms\",value:function getChatrooms(){this.props.socket.emit(\"get_chats\");}},{key:\"getDirect\",value:function getDirect(){this.props.socket.emit(\"get_direct\");}},{key:\"clickChatLink\",value:function clickChatLink(id){this.props.updateAppState({id:id});}},{key:\"renderChatLinks\",value:function renderChatLinks(){var _this3=this;return this.state.chatrooms.map(function(i,index){return/*#__PURE__*/React.createElement(ChatroomLink,{name:i.name,id:i._id,key:index,onClick:_this3.clickChatLink});});}},{key:\"renderDirectLinks\",value:function renderDirectLinks(){return this.state.directData.map(function(i,index){return/*#__PURE__*/React.createElement(DirectLink,{direct:i,tag:i.users,key:index,chatype:\"direct\"});});}},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/React.createElement(\"nav\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"csnav leftnav bg-dark\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn text-left  csnav-btn \",type:\"button\"},/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"text-info\"},\"Home\",/*#__PURE__*/React.createElement(\"svg\",{width:\"1em\",height:\"1em\",viewBox:\"0 0 16 16\",className:\"bi bi-house ml-1\",fill:\"currentColor\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{fillRule:\"evenodd\",d:\"M2 13.5V7h1v6.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7h1v6.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5zm11-11V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z\"}),/*#__PURE__*/React.createElement(\"path\",{fillRule:\"evenodd\",d:\"M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z\"})))))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-block\"},/*#__PURE__*/React.createElement(\"div\",{className:\"bg-dark card mb-2\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"mb-0\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){_this4.setState({isDialog:true});},className:\"btn text-left  csnav-btn \",type:\"button\"},/*#__PURE__*/React.createElement(Link,{to:\"#\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"text-info\"},\"New Chat\",/*#__PURE__*/React.createElement(\"svg\",{width:\"1em\",height:\"1em\",viewBox:\"0 0 16 16\",className:\"bi bi-chat-left-quote ml-1\",fill:\"currentColor\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{fillRule:\"evenodd\",d:\"M14 1H2a1 1 0 0 0-1 1v11.586l2-2A2 2 0 0 1 4.414 11H14a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"}),/*#__PURE__*/React.createElement(\"path\",{fillRule:\"evenodd\",d:\"M7.066 4.76A1.665 1.665 0 0 0 4 5.668a1.667 1.667 0 0 0 2.561 1.406c-.131.389-.375.804-.777 1.22a.417.417 0 1 0 .6.58c1.486-1.54 1.293-3.214.682-4.112zm4 0A1.665 1.665 0 0 0 8 5.668a1.667 1.667 0 0 0 2.561 1.406c-.131.389-.375.804-.777 1.22a.417.417 0 1 0 .6.58c1.486-1.54 1.293-3.214.682-4.112z\"})))))))),/*#__PURE__*/React.createElement(\"h4\",null,\"Chats\",/*#__PURE__*/React.createElement(\"svg\",{width:\"1em\",height:\"1em\",viewBox:\"0 0 16 16\",className:\"bi bi-chat-left ml-1\",fill:\"currentColor\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{fillRule:\"evenodd\",d:\"M14 1H2a1 1 0 0 0-1 1v11.586l2-2A2 2 0 0 1 4.414 11H14a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"csnavBox\"},this.renderChatLinks()))),/*#__PURE__*/React.createElement(CreateChatDialog,{updateParentState:this.updateLocalState,isDialog:this.state.isDialog,createChat:this.createChat},\"Pick a name for your new chat\"));}}]);return LeftNavbar;}(Component);export default LeftNavbar;","map":{"version":3,"sources":["/home/amadeus/react-chat/frontend/src/componets/navbar/leftNavbar.js"],"names":["React","Component","Link","axios","DirectLink","ChatroomLink","CreateChatDialog","LeftNavbar","props","_isMounted","state","chatrooms","chatroom","directData","directto","isDialog","source","CancelToken","updateLocalState","bind","createChat","getChatrooms","getDirect","clickChatLink","socket","on","data","setState","cancel","stateObject","name","emit","id","updateAppState","map","i","index","_id","users","renderChatLinks"],"mappings":"wvBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,oBAAvB,CACA,MAAOC,CAAAA,YAAP,KAAyB,sBAAzB,CAEA,MAAOC,CAAAA,gBAAP,KAA6B,2BAA7B,C,GACMC,CAAAA,U,wGACJ,oBAAYC,KAAZ,CAAmB,4CACjB,uBAAMA,KAAN,EACA,MAAKC,UAAL,CAAkB,KAAlB,CAEA,MAAKC,KAAL,CAAa,CACXC,SAAS,CAAE,EADA,CAEXC,QAAQ,CAAE,IAFC,CAGXC,UAAU,CAAE,EAHD,CAIXC,QAAQ,CAAE,IAJC,CAKXC,QAAQ,CAAE,KALC,CAAb,CAOA,MAAKC,MAAL,CAAcb,KAAK,CAACc,WAAN,CAAkBD,MAAlB,EAAd,CACA,MAAKE,gBAAL,CAAwB,MAAKA,gBAAL,CAAsBC,IAAtB,+BAAxB,CACA,MAAKC,UAAL,CAAkB,MAAKA,UAAL,CAAgBD,IAAhB,+BAAlB,CACA,MAAKE,YAAL,CAAoB,MAAKA,YAAL,CAAkBF,IAAlB,+BAApB,CACA,MAAKG,SAAL,CAAiB,MAAKA,SAAL,CAAeH,IAAf,+BAAjB,CACA,MAAKI,aAAL,CAAqB,MAAKA,aAAL,CAAmBJ,IAAnB,+BAArB,CAhBiB,aAiBlB,C,oFACmB,iBAClB,KAAKV,UAAL,CAAkB,IAAlB,CACA,KAAKD,KAAL,CAAWgB,MAAX,CAAkBC,EAAlB,CAAqB,eAArB,CAAsC,UAAM,CAC1C,MAAI,CAACH,SAAL,GACD,CAFD,EAGA,KAAKd,KAAL,CAAWgB,MAAX,CAAkBC,EAAlB,CAAqB,WAArB,CAAkC,SAACC,IAAD,CAAU,CAC1C,MAAI,CAACC,QAAL,CAAc,CAAEhB,SAAS,CAAEe,IAAb,CAAd,EACD,CAFD,EAGA,KAAKlB,KAAL,CAAWgB,MAAX,CAAkBC,EAAlB,CAAqB,YAArB,CAAmC,SAACC,IAAD,CAAU,CAC3C,MAAI,CAACC,QAAL,CAAc,CAAEd,UAAU,CAAEa,IAAd,CAAd,EACD,CAFD,EAIA,KAAKL,YAAL,GACA,KAAKC,SAAL,GACD,C,mEACsB,CACrB,KAAKb,UAAL,CAAkB,KAAlB,CACA,KAAKO,MAAL,CAAYY,MAAZ,GACD,C,0DACgBC,W,CAAa,CAC5B,KAAKF,QAAL,CAAcE,WAAd,EACD,C,8CACUC,I,CAAM,CACf,KAAKtB,KAAL,CAAWY,UAAX,CAAsBU,IAAtB,EACD,C,mDACc,CACb,KAAKtB,KAAL,CAAWgB,MAAX,CAAkBO,IAAlB,CAAuB,WAAvB,EACD,C,6CACW,CACV,KAAKvB,KAAL,CAAWgB,MAAX,CAAkBO,IAAlB,CAAuB,YAAvB,EACD,C,oDACaC,E,CAAI,CAChB,KAAKxB,KAAL,CAAWyB,cAAX,CAA0B,CAAED,EAAE,CAAFA,EAAF,CAA1B,EACD,C,yDACiB,iBAChB,MAAO,MAAKtB,KAAL,CAAWC,SAAX,CAAqBuB,GAArB,CAAyB,SAACC,CAAD,CAAIC,KAAJ,CAAc,CAC5C,mBACE,oBAAC,YAAD,EACE,IAAI,CAAED,CAAC,CAACL,IADV,CAEE,EAAE,CAAEK,CAAC,CAACE,GAFR,CAGE,GAAG,CAAED,KAHP,CAIE,OAAO,CAAE,MAAI,CAACb,aAJhB,EADF,CAQD,CATM,CAAP,CAUD,C,6DACmB,CAClB,MAAO,MAAKb,KAAL,CAAWG,UAAX,CAAsBqB,GAAtB,CAA0B,SAACC,CAAD,CAAIC,KAAJ,CAAc,CAC7C,mBACE,oBAAC,UAAD,EAAY,MAAM,CAAED,CAApB,CAAuB,GAAG,CAAEA,CAAC,CAACG,KAA9B,CAAqC,GAAG,CAAEF,KAA1C,CAAiD,OAAO,CAAE,QAA1D,EADF,CAGD,CAJM,CAAP,CAKD,C,uCACQ,iBACP,mBACE,4CACE,2BAAK,SAAS,CAAC,uBAAf,eACE,2BAAK,SAAS,CAAC,KAAf,eACE,0BAAI,SAAS,CAAC,MAAd,eACE,8BAAQ,SAAS,CAAC,2BAAlB,CAA8C,IAAI,CAAC,QAAnD,eACE,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,eACE,0BAAI,SAAS,CAAC,WAAd,sBAEE,2BACE,KAAK,CAAC,KADR,CAEE,MAAM,CAAC,KAFT,CAGE,OAAO,CAAC,WAHV,CAIE,SAAS,CAAC,kBAJZ,CAKE,IAAI,CAAC,cALP,CAME,KAAK,CAAC,4BANR,eAQE,4BACE,QAAQ,CAAC,SADX,CAEE,CAAC,CAAC,gKAFJ,EARF,cAYE,4BACE,QAAQ,CAAC,SADX,CAEE,CAAC,CAAC,kHAFJ,EAZF,CAFF,CADF,CADF,CADF,CADF,cA2BE,2BAAK,SAAS,CAAC,SAAf,eACE,2BAAK,SAAS,CAAC,mBAAf,eACE,0BAAI,SAAS,CAAC,MAAd,eACE,8BACE,OAAO,CAAE,kBAAM,CACb,MAAI,CAACT,QAAL,CAAc,CACZZ,QAAQ,CAAE,IADE,CAAd,EAGD,CALH,CAME,SAAS,CAAC,2BANZ,CAOE,IAAI,CAAC,QAPP,eASE,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,eACE,0BAAI,SAAS,CAAC,WAAd,0BAEE,2BACE,KAAK,CAAC,KADR,CAEE,MAAM,CAAC,KAFT,CAGE,OAAO,CAAC,WAHV,CAIE,SAAS,CAAC,4BAJZ,CAKE,IAAI,CAAC,cALP,CAME,KAAK,CAAC,4BANR,eAQE,4BACE,QAAQ,CAAC,SADX,CAEE,CAAC,CAAC,uMAFJ,EARF,cAYE,4BACE,QAAQ,CAAC,SADX,CAEE,CAAC,CAAC,ySAFJ,EAZF,CAFF,CADF,CATF,CADF,CADF,CADF,CA3BF,cAiEE,mDAEE,2BACE,KAAK,CAAC,KADR,CAEE,MAAM,CAAC,KAFT,CAGE,OAAO,CAAC,WAHV,CAIE,SAAS,CAAC,sBAJZ,CAKE,IAAI,CAAC,cALP,CAME,KAAK,CAAC,4BANR,eAQE,4BACE,QAAQ,CAAC,SADX,CAEE,CAAC,CAAC,uMAFJ,EARF,CAFF,CAjEF,cAiFE,2BAAK,SAAS,CAAC,UAAf,EAA2B,KAAKwB,eAAL,EAA3B,CAjFF,CADF,CADF,cAsFE,oBAAC,gBAAD,EACE,iBAAiB,CAAE,KAAKrB,gBAD1B,CAEE,QAAQ,CAAE,KAAKR,KAAL,CAAWK,QAFvB,CAGE,UAAU,CAAE,KAAKK,UAHnB,kCAtFF,CADF,CAgGD,C,wBAzKsBnB,S,EA4KzB,cAAeM,CAAAA,UAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport DirectLink from \"./links/directLink\";\nimport ChatroomLink from \"./links/chatroomLink\";\n\nimport CreateChatDialog from \"./dialog/createChatDialog\";\nclass LeftNavbar extends Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = false;\n\n    this.state = {\n      chatrooms: [],\n      chatroom: null,\n      directData: [],\n      directto: null,\n      isDialog: false,\n    };\n    this.source = axios.CancelToken.source();\n    this.updateLocalState = this.updateLocalState.bind(this);\n    this.createChat = this.createChat.bind(this);\n    this.getChatrooms = this.getChatrooms.bind(this);\n    this.getDirect = this.getDirect.bind(this);\n    this.clickChatLink = this.clickChatLink.bind(this);\n  }\n  componentDidMount() {\n    this._isMounted = true;\n    this.props.socket.on(\"create_direct\", () => {\n      this.getDirect();\n    });\n    this.props.socket.on(\"get_chats\", (data) => {\n      this.setState({ chatrooms: data });\n    });\n    this.props.socket.on(\"get_direct\", (data) => {\n      this.setState({ directData: data });\n    });\n\n    this.getChatrooms();\n    this.getDirect();\n  }\n  componentWillUnmount() {\n    this._isMounted = false;\n    this.source.cancel();\n  }\n  updateLocalState(stateObject) {\n    this.setState(stateObject);\n  }\n  createChat(name) {\n    this.props.createChat(name);\n  }\n  getChatrooms() {\n    this.props.socket.emit(\"get_chats\");\n  }\n  getDirect() {\n    this.props.socket.emit(\"get_direct\");\n  }\n  clickChatLink(id) {\n    this.props.updateAppState({ id });\n  }\n  renderChatLinks() {\n    return this.state.chatrooms.map((i, index) => {\n      return (\n        <ChatroomLink\n          name={i.name}\n          id={i._id}\n          key={index}\n          onClick={this.clickChatLink}\n        />\n      );\n    });\n  }\n  renderDirectLinks() {\n    return this.state.directData.map((i, index) => {\n      return (\n        <DirectLink direct={i} tag={i.users} key={index} chatype={\"direct\"} />\n      );\n    });\n  }\n  render() {\n    return (\n      <nav>\n        <div className=\"csnav leftnav bg-dark\">\n          <div className=\"col\">\n            <h2 className=\"mb-0\">\n              <button className=\"btn text-left  csnav-btn \" type=\"button\">\n                <Link to=\"/\">\n                  <h5 className=\"text-info\">\n                    Home\n                    <svg\n                      width=\"1em\"\n                      height=\"1em\"\n                      viewBox=\"0 0 16 16\"\n                      className=\"bi bi-house ml-1\"\n                      fill=\"currentColor\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <path\n                        fillRule=\"evenodd\"\n                        d=\"M2 13.5V7h1v6.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7h1v6.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5zm11-11V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z\"\n                      />\n                      <path\n                        fillRule=\"evenodd\"\n                        d=\"M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z\"\n                      />\n                    </svg>\n                  </h5>\n                </Link>\n              </button>\n            </h2>\n            <div className=\"d-block\">\n              <div className=\"bg-dark card mb-2\">\n                <h2 className=\"mb-0\">\n                  <button\n                    onClick={() => {\n                      this.setState({\n                        isDialog: true,\n                      });\n                    }}\n                    className=\"btn text-left  csnav-btn \"\n                    type=\"button\"\n                  >\n                    <Link to=\"#\">\n                      <h5 className=\"text-info\">\n                        New Chat\n                        <svg\n                          width=\"1em\"\n                          height=\"1em\"\n                          viewBox=\"0 0 16 16\"\n                          className=\"bi bi-chat-left-quote ml-1\"\n                          fill=\"currentColor\"\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                        >\n                          <path\n                            fillRule=\"evenodd\"\n                            d=\"M14 1H2a1 1 0 0 0-1 1v11.586l2-2A2 2 0 0 1 4.414 11H14a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"\n                          />\n                          <path\n                            fillRule=\"evenodd\"\n                            d=\"M7.066 4.76A1.665 1.665 0 0 0 4 5.668a1.667 1.667 0 0 0 2.561 1.406c-.131.389-.375.804-.777 1.22a.417.417 0 1 0 .6.58c1.486-1.54 1.293-3.214.682-4.112zm4 0A1.665 1.665 0 0 0 8 5.668a1.667 1.667 0 0 0 2.561 1.406c-.131.389-.375.804-.777 1.22a.417.417 0 1 0 .6.58c1.486-1.54 1.293-3.214.682-4.112z\"\n                          />\n                        </svg>\n                      </h5>\n                    </Link>\n                  </button>\n                </h2>\n              </div>\n            </div>\n            <h4>\n              Chats\n              <svg\n                width=\"1em\"\n                height=\"1em\"\n                viewBox=\"0 0 16 16\"\n                className=\"bi bi-chat-left ml-1\"\n                fill=\"currentColor\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  fillRule=\"evenodd\"\n                  d=\"M14 1H2a1 1 0 0 0-1 1v11.586l2-2A2 2 0 0 1 4.414 11H14a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"\n                />\n              </svg>\n            </h4>\n            <div className=\"csnavBox\">{this.renderChatLinks()}</div>\n          </div>\n        </div>\n        <CreateChatDialog\n          updateParentState={this.updateLocalState}\n          isDialog={this.state.isDialog}\n          createChat={this.createChat}\n        >\n          Pick a name for your new chat\n        </CreateChatDialog>\n      </nav>\n    );\n  }\n}\n\nexport default LeftNavbar;\n"]},"metadata":{},"sourceType":"module"}